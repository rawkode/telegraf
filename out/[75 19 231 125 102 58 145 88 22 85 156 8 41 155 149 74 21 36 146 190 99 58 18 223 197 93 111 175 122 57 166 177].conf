[global_tags]

[agent]

  interval = "10s"

  round_interval = true

  metric_batch_size = 1000

  metric_buffer_limit = 10000

  collection_jitter = "0s"

  flush_interval = "10s"

  flush_jitter = "0s"

  precision = ""

  debug = true

  quiet = false

  logfile = "/var/log/telegraf/telegraf.log"

  hostname = ""

  omit_hostname = false



[[outputs.influxdb]]

  urls = ["http://$INFLUXDB_HOST:$INFLUXDB_PORT"] # required

  database = "$INFLUXDB_DATABASE" # required

  retention_policy = ""

  write_consistency = "any"

  timeout = "5s"

  username = "$INFLUXDB_USER"

  password = "$INFLUXDB_PASS"



[[inputs.cpu]]

  percpu = true

  totalcpu = true

  collect_cpu_time = false



[[inputs.disk]]

  ignore_fs = ["tmpfs", "devtmpfs"]



[[inputs.diskio]]

[[inputs.kernel]]

[[inputs.mem]]

[[inputs.processes]]

[[inputs.swap]]

[[inputs.system]]

 [[inputs.statsd]]

   service_address = ":8125"

   delete_gauges = true

   delete_counters = true

   delete_sets = true

   delete_timings = true

   percentiles = [90]

   metric_separator = "."

   parse_data_dog_tags = false

   allowed_pending_messages = 10000

   percentile_limit = 1000



[[inputs.jolokia2_agent]]

   urls = ["http://$JOLOKIA_HOST:$JOLOKIA_PORT/jolokia/"]



   [[inputs.jolokia2_agent.metric]]

     name         = "kafka_os"

     mbean        = "java.lang:type=OperatingSystem"



   [[inputs.jolokia2_agent.metric]]

     name         = "kafka_memory"

     mbean        = "java.lang:type=Memory"



   [[inputs.jolokia2_agent.metric]]

     name         = "kafka_topic"

     mbean        = "kafka.server:type=BrokerTopicMetrics,name=*,topic=*"

     field_prefix = "$1"

     tag_keys     = ["topic"]



   [[inputs.jolokia2_agent.metric]]

     name = "kafka_log"

     mbean = "kafka.log:type=Log,name=*,topic=*,partition=*"

     paths = ["Value"]

     tag_keys = ["topic", "name", "partition"]



   [[inputs.jolokia2_agent.metric]]

     name = "kafka_log_cleaner"

     mbean = "kafka.log:type=LogCleanerManager,name=*"

     tag_keys     = ["name"]





   [[inputs.jolokia2_agent.metric]]

     name = "kafka_network_total"

     mbean = "kafka.network:type=RequestMetrics,name=TotalTimeMs,request=*"

     paths = ["Mean"]

     tag_keys     = ["request"]



   [[inputs.jolokia2_agent.metric]]

     name = "kafka_network_throttle"

     mbean = "kafka.network:type=RequestMetrics,name=ThrottleTimeMs,request=*"

     paths = ["Mean"]

     tag_keys     = ["request"]



   [[inputs.jolokia2_agent.metric]]

     name = "kafka_network_request"

     mbean = "kafka.network:type=RequestMetrics,name=RequestsPerSec,request=*"

     tag_keys     = ["request"]



   [[inputs.jolokia2_agent.metric]]

     name = "kafka_server_socket"

     mbean = "kafka.server:type=socket-server-metrics,listener=*,networkProcessor=*"

     tag_keys     = ["listener", "networkProcessor"]



   [[inputs.jolokia2_agent.metric]]

     name     = "kafka_jvm_garbage_collector"

     mbean    = "java.lang:name=*,type=GarbageCollector"

     paths    = ["CollectionTime", "CollectionCount"]

     field_name = "java.lang:name=*,type=GarbageCollector"

     tag_keys = ["typeName"]
